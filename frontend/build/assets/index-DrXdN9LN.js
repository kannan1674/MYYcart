import{j as e,H as re,c as D,a as P,u as x,b as k,r as m,y as b,L as N,P as X,d as _,e as Z,D as A,I as ne,f as E,C as H,M as $,S as le,T as ie,g as oe,h as ce,t as de,N as M,i as me,k as ue,l as he,m as z,n as pe,o as xe,G as ge,p as q,B as je,q as fe,R as J,s as S,E as Ne,v as ve,w as ye,x as we,z as be}from"./vendor-DkOOPiAh.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=a(n);fetch(n.href,l)}})();const O=({title:s})=>e.jsx(re,{children:e.jsx("title",{children:`${s} | MyCart`})}),Se=D({name:"Products",initialState:{loading:!1},reducers:{productsRequest(s,t){return{loading:!0}},productsSuccess(s,t){return{loading:!1,products:t.payload.products,count:t.payload.count,resPerPage:t.payload.resPerPage}},productsFail(s,t){return{loading:!1,error:t.payload}},adminProductsRequest(s,t){return{loading:!0}},adminProductsSuccess(s,t){return{loading:!1,products:t.payload.products}},adminProductsFail(s,t){return{loading:!1,error:t.payload}}}}),{actions:Pe,reducer:Ce}=Se,{productsRequest:ke,productsSuccess:_e,productsFail:Fe,adminProductsRequest:Oe,adminProductsSuccess:Ie,adminProductsFail:B}=Pe,ee=(s,t,a,r,n)=>async l=>{try{l(ke());let i=`http://localhost:8000/api/get-products?page=${n}`;s&&(i+=`&keyword=${s}`),t&&(i+=`&price[gte]=${t[0]}&&price[lte]=${t[1]}`),a&&(i+=`&category=${a}`),r&&(i+=`&ratings=${r}`);const{data:d}=await P.get(i);l(_e(d))}catch(i){l(Fe(i.response?i.response.data.message:"Something went wrong"))}},Ae=async s=>{if(!localStorage.getItem("authToken"))return s(B("Authentication token is missing."));try{s(Oe());const{data:a}=await P.get("http://localhost:8000/api/Admin/all-products");s(Ie(a))}catch(a){s(B(a.response?a.response.data.message:"something wrong"))}},Re=({title:s})=>{const{products:t,error:a,count:r,resPerPage:n}=x(o=>o.productsState),l=k(),[i,d]=m.useState(1),c=o=>{d(o)};return m.useEffect(()=>{a&&b.error(a),l(ee(null,null,null,null,i))},[l,i,a]),e.jsxs("div",{children:[e.jsx(O,{title:"Home"}),e.jsx("h1",{id:"products_heading",children:"Latest Products"}),e.jsx("section",{id:"products",className:"container mt-5",children:e.jsx("div",{className:"row",children:t&&t.map(o=>e.jsx("div",{className:"col-sm-12 col-md-6 col-lg-3 my-3",children:e.jsxs("div",{className:"card p-3 rounded",children:[e.jsx("img",{className:"card-img-top mx-auto",src:o.images[0].image,alt:o.name}),e.jsxs("div",{className:"card-body d-flex flex-column",children:[e.jsx("h5",{className:"card-title",children:e.jsx(N,{to:`product/${o._id}`,children:o.name})}),e.jsxs("div",{className:"ratings mt-auto",children:[e.jsx("div",{className:"rating-outer",children:e.jsx("div",{className:"rating-inner",style:{width:`${o.ratings/5*100}%`}})}),e.jsx("span",{id:"no_of_reviews",children:o.numOfReviews})]}),e.jsxs("p",{className:"card-text",children:["$",o.price]}),e.jsx(N,{to:`product/${o._id}`,id:"view_btn",className:"btn btn-block",children:"View Details"})]})]})},o._id))})}),r>0&&r>n?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(X,{activePage:i,onChange:c,totalItemsCount:r,itemsCountPerPage:n,firstPageText:"FirstPage",lastPageText:"LastPage",itemClass:"page-item",linkClass:"page-link"})}):null]})},$e=()=>e.jsx("div",{children:e.jsx("footer",{className:"py-1",children:e.jsx("p",{className:"text-center text-dark mt-1",children:"Mycart - 2024-2025, All Rights Reserved"})})}),De=()=>{const[s,t]=m.useState(""),a=_(),r=Z(),n=i=>{i.preventDefault(),a(`/search/${s}`)},l=()=>{t("")};return m.useEffect(()=>{r.pathname=="/"&&l()},[r.pathname]),e.jsx("form",{onSubmit:n,children:e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",id:"search_field",className:"form-control",placeholder:"Enter Product Name ...",onChange:i=>t(i.target.value),value:s}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{id:"search_btn",className:"btn",children:e.jsx("i",{className:"fa fa-search","aria-hidden":"true"})})})]})})},T=(s,t)=>{try{return JSON.parse(s)??t}catch{return t}},Ee=D({name:"auth",initialState:{loading:!1,isAuthenticated:T(localStorage.getItem("isAuthenticated"),!1),user:T(localStorage.getItem("user"),null),authToken:T(localStorage.getItem("authToken"),!1),error:null,isUpdated:!1},reducers:{loginRequest(s){return{...s,loading:!0}},loginSuccess(s,t){const{user:a,token:r}=t.payload;return localStorage.setItem("authToken",r),localStorage.setItem("isAuthenticated",JSON.stringify(!0)),localStorage.setItem("user",JSON.stringify(a)),{...s,loading:!1,isAuthenticated:!0,user:a}},loginFail(s,t){return{...s,loading:!1,error:t.payload}},clearError(s){return{...s,error:null}},registerRequest(s){return{...s,loading:!0}},registerSuccess(s,t){const{user:a,token:r}=t.payload;return localStorage.setItem("authToken",r),localStorage.setItem("isAuthenticated",JSON.stringify(!0)),localStorage.setItem("user",JSON.stringify(a)),{...s,loading:!1,isAuthenticated:!0,user:a}},registerFail(s,t){return{...s,loading:!1,error:t.payload}},loadUserRequest(s){return{...s,loading:!0}},loadUserSuccess(s,t){const{user:a,token:r}=t.payload;return localStorage.setItem("authToken",r),localStorage.setItem("isAuthenticated",JSON.stringify(!0)),localStorage.setItem("user",JSON.stringify(a)),{...s,loading:!1,isAuthenticated:!0,user:a}},loadUserFail(s,t){return{...s,loading:!1,error:t.payload}},logoutSuccess(s){return localStorage.removeItem("authToken"),localStorage.removeItem("isAuthenticated"),localStorage.removeItem("user"),{...s,isAuthenticated:!1,user:null,isUpdated:!1}},logoutFail(s,t){return{...s,loading:!1,error:t.payload}},updateProfileRequest(s){return{...s,loading:!0,isUpdated:!1}},updateProfileSuccess(s,t){const a=t.payload.user;return localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("authToken",t.payload.token),{...s,loading:!1,user:a,isUpdated:!0}},updateProfileFail(s,t){return{...s,loading:!1,error:t.payload}},clearUpdateProfile(s,t){return{...s,isUpdated:!1}},updatePasswordRequest(s){return{...s,loading:!0,isUpdated:!1}},updatePasswordSuccess(s,t){return{loading:!1,message:t.payload.message}},updatePasswordFail(s,t){return{...s,loading:!1,error:t.payload}},forgotPasswordRequest(s){return{...s,loading:!0,message:null}},forgotPasswordSuccess(s,t){return{loading:!1,message:t.payload.message}},forgotPasswordFail(s,t){return{...s,loading:!1,error:t.payload}},resetPasswordRequest(s){return{...s,loading:!0}},resetPasswordSuccess(s,t){return{loading:!1,isAuthenticated:!0,user:t.payload.user}},resetPasswordFail(s,t){return{...s,loading:!1,error:t.payload}}}}),{actions:qe,reducer:Te}=Ee,{loginRequest:Ue,loginSuccess:Le,loginFail:He,clearError:se,registerRequest:Me,registerSuccess:ze,registerFail:Je,loadUserRequest:Be,loadUserSuccess:Ve,loadUserFail:V,logoutSuccess:Qe,logoutFail:Ge,updateProfileRequest:Ke,updateProfileSuccess:Ye,updateProfileFail:Q,updatePasswordFail:G,clearUpdateProfile:We,updatePasswordRequest:Xe,updatePasswordSuccess:Ze,forgotPasswordRequest:es,forgotPasswordSuccess:ss,forgotPasswordFail:ts,resetPasswordRequest:as,resetPasswordSuccess:rs,resetPasswordFail:ns}=qe,ls=(s,t)=>async a=>{try{a(Ue());const{data:r}=await P.post("http://localhost:8000/api/user-signin",{email:s,password:t},{withCredentials:!0});a(Le(r))}catch(r){a(He(r.response.data.message))}},is=s=>async t=>{try{t(Me());const a={headers:{"Content-type":"multipart/form-data"},withCredentials:!0},{data:r}=await P.post("http://localhost:8000/api/user-register",s,a);t(ze(r))}catch{t(Je())}},os=async s=>{var r,n;const t=localStorage.getItem("token");if(!t){s(V());return}const a={headers:{Authorization:`Bearer ${t}`},withCredentials:!0};try{s(Be());const{data:l}=await P.get("http://localhost:8000/api/user-myprofile",a);s(Ve({user:l}))}catch(l){console.error(l),s(V(((n=(r=l.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to load user"))}},cs=async s=>{try{P.get("http://localhost:8000/api/user-logout"),s(Qe())}catch{s(Ge())}},ds=s=>async t=>{var n,l;const a=localStorage.getItem("authToken");if(!a)return t(Q("Authentication token is missing."));const r={headers:{Authorization:`Bearer ${a}`,"Content-Type":"multipart/form-data"},withCredentials:!0};try{t(Ke());const{data:i}=await P.put("http://localhost:8000/api/user-updateprofile",s,r);t(Ye(i))}catch(i){const d=((l=(n=i.response)==null?void 0:n.data)==null?void 0:l.message)||"Failed to update profile";t(Q(d))}},ms=s=>async t=>{var n,l;const a=localStorage.getItem("authToken");if(!a)return console.error("Authentication token is missing."),t(G("Authentication token is missing."));const r={headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},withCredentials:!0};try{t(Xe());const{data:i}=await P.put("http://localhost:8000/api/password/change",s,r);t(Ze({payload:i.success}))}catch(i){const d=((l=(n=i.response)==null?void 0:n.data)==null?void 0:l.message)||"Failed to update password";console.error("Error updating password:",d),t(G(d))}},us=(s,t)=>async a=>{var n,l;const r={headers:{"Content-Type":"application/json"},withCredentials:!0};try{a(as());const{data:i}=await P.post(`http://localhost:8000/api/password/reset/${t}`,s,r);a(rs(i))}catch(i){const d=((l=(n=i.response)==null?void 0:n.data)==null?void 0:l.message)||"Failed to update password";console.error("Error updating password:",d),a(ns(d))}},hs=s=>async t=>{var r,n;const a={headers:{"Content-Type":"application/json"},withCredentials:!0};try{t(es());const{data:l}=await P.post("http://localhost:8000/api/user-forgotpassword",s,a);t(ss(l))}catch(l){const i=((n=(r=l.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update password";console.error(i),t(ts(i))}},ps=()=>{const{isAuthenticated:s,user:t}=x(i=>i.authState),{items:a}=x(i=>i.cartState),r=k(),n=_(),l=()=>{r(cs)};return e.jsxs("nav",{className:"navbar row",children:[e.jsx("div",{className:"col-12 col-md-3",children:e.jsx("div",{className:"navbar-brand",children:e.jsx(N,{to:"/",children:e.jsx("img",{width:"150px",alt:"mycart",src:"./images/products/logo.png"})})})}),e.jsx("div",{className:"col-12 col-md-6 mt-2 mt-md-0",children:e.jsx(De,{})}),e.jsxs("div",{className:"col-12 col-md-3 mt-4 mt-md-0 text-center",children:[s?e.jsxs(A,{className:"d-inline",children:[e.jsxs(A.Toggle,{variant:"default text-white pr-5",id:"dropdown-basic",children:[e.jsx("figure",{className:"avatar avatar-nav",children:e.jsx(ne,{className:"rounded-circle",width:"50px",src:t&&t.avatar?`http://127.0.0.1:8000${t.avatar}`:"./images.png"})}),e.jsx("span",{children:t&&t.name})]}),e.jsxs(A.Menu,{children:[t.role=="admin"&&e.jsx(A.Item,{className:"text-dark",onClick:()=>n("admin/dashboard"),children:"Dashboard"}),e.jsx(A.Item,{className:"text-dark",onClick:()=>n("/myprofile"),children:"Profile"}),e.jsx(A.Item,{className:"text-dark",onClick:()=>n("/order/myorders"),children:"Orders"}),e.jsx(A.Item,{className:"text-danger",onClick:l,children:"Logout"})]})]}):e.jsx(N,{to:"/login",children:e.jsx("button",{className:"btn",id:"login_btn",children:"Login"})}),e.jsx(N,{to:"/cart",children:e.jsx("span",{id:"cart",className:"ml-3",children:"Cart"})}),e.jsx("span",{className:"ml-1",id:"cart_count",children:a.length})]})]})},xs=D({name:"Product",initialState:{loading:!1,product:null,isReviewed:!1},reducers:{productRequest(s,t){return{...s,loading:!0}},productSuccess(s,t){return{...s,loading:!1,product:t.payload.product}},productFail(s,t){return{...s,loading:!1,error:t.payload}},createReviewRequest(s,t){return{...s,loading:!0}},createReviewSuccess(s,t){return{...s,loading:!1,isReviewed:!0}},clearReviewSubmitted(s,t){return{...s,isReviewed:!1}},createReviewFail(s,t){return{loading:!1,error:t.payload}},clearReviewError(s,t){return{loading:!1,error:null}},clearError(s,t){return{loading:!1,error:null}}}}),{actions:gs,reducer:js}=xs,{productRequest:fs,productSuccess:Ns,productFail:vs,clearError:Nt,createReviewRequest:ys,createReviewSuccess:ws,createReviewFail:K,clearReviewError:bs}=gs,Ss=s=>async t=>{try{t(fs());const{data:a}=await P.get(`http://localhost:8000/api/product/${s}`);t(Ns(a))}catch(a){t(vs(a.response?a.response.data.message:"Something went wrong"))}},Ps=s=>async t=>{const a=localStorage.getItem("authToken");if(!a)return t(K("Authentication token is missing."));const r={headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},withCredentials:!0};try{t(ys());const{data:n}=await P.put("http://localhost:8000/api/review/create",s,r);t(ws(n))}catch(n){t(K(n.response?n.response.data.message:"Something went wrong"))}},Y=(s,t=[])=>{try{return JSON.parse(s)??t}catch{return t}},Cs=D({name:"cart",initialState:{items:Y(localStorage.getItem("cartItems"),[]),loading:!1,shippingInfo:Y(localStorage.getItem("shippingItems"),{address:"",city:"",phoneNo:"",pinCode:"",country:"",state:""})},reducers:{addCartItemRequest(s,t){return{...s,loading:!1}},addCartItemSuccess(s,t){const a=t.payload;s.items.find(n=>n.product===a.product)?s.items=s.items.map(n=>n.product===a.product?{...n,...a}:n):s.items.push(a),localStorage.setItem("cartItems",JSON.stringify(s.items))},increaseCartQuantity(s,t){s.items=s.items.map(a=>(a.product==t.payload&&(a.quantity=a.quantity+1),a)),localStorage.setItem("cartItems",JSON.stringify(s.items))},decreaseCartQuantity(s,t){s.items=s.items.map(a=>(a.product==t.payload&&(a.quantity=a.quantity-1),a)),localStorage.setItem("cartItems",JSON.stringify(s.items))},deleteCartItems(s,t){const a=s.items.filter(r=>r.product!==t.payload);return localStorage.setItem("cartItems",JSON.stringify(a)),{...s,items:a}},shippingDetails(s,t){return localStorage.setItem("shippingInfo",JSON.stringify(t.payload)),{...s,shippingInfo:t.payload}},orderCompleted(s,t){return localStorage.removeItem("shippingInfo"),localStorage.removeItem("cartItems"),sessionStorage.removeItem("orderInfo"),{loading:!1,items:[],shippingInfo:{}}}}}),{actions:ks,reducer:_s}=Cs,{addCartItemRequest:Fs,addCartItemSuccess:Os,increaseCartQuantity:Is,decreaseCartQuantity:As,deleteCartItems:Rs,shippingDetails:$s,orderCompleted:Ds}=ks,Es=(s,t)=>async a=>{try{a(Fs());const{data:r}=await P.get(`http://localhost:8000/api/product/${s}`);a(Os({product:r.product._id,name:r.product.name,price:r.product.price,image:r.product.images[0].image,stock:r.product.stock,quantity:t}))}catch(r){console.error("Failed to fetch product data:",r)}},qs=({reviews:s})=>e.jsxs("div",{className:"reviews w-75 mt-5",children:[e.jsx("h3",{children:"User's Reviews:"}),e.jsx("hr",{}),s&&s.length>0?s.map(t=>e.jsxs("div",{className:"review-card my-3",children:[e.jsx("div",{className:"rating-outer",children:e.jsx("div",{className:"rating-inner",style:{width:`${t.rating/5*100}%`}})}),e.jsxs("p",{className:"review_user",children:["by ",t.user.name]}),e.jsx("p",{className:"review_comment",children:t.comment}),e.jsx("hr",{})]},t._id)):e.jsx("p",{children:"No reviews yet."})]}),Ts=()=>{const{product:s={},loading:t,isReviewed:a,error:r}=x(f=>f.productState),{user:n}=x(f=>f.authState),l=k(),{id:i}=E(),[d,c]=m.useState(1),[o,u]=m.useState(1),[g,h]=m.useState(""),[v,y]=m.useState(!1),j=()=>y(!1),C=()=>y(!0),R=()=>{const f=document.querySelector(".count");if(s.stock==0||f.valueAsNumber>=s.stock)return;const I=f.valueAsNumber+1;c(I)},w=()=>{const f=document.querySelector(".count");if(f.valueAsNumber==1)return;const I=f.valueAsNumber-1;c(I)};if(m.useEffect(()=>{a&&(j(),b.success("Review Submitted Successfully",{onOpen:()=>l(bs())})),l(Ss(i))},[l,i,a,r]),t)return e.jsx("h2",{children:"Loading..."});if(!s)return e.jsx("h2",{children:"Product not found!"});const p=()=>{const f=new FormData;f.append("rating",o),f.append("comment",g),f.append("productId",i),l(Ps(f))};return e.jsxs(m.Fragment,{children:[e.jsx(O,{title:s.name}),e.jsxs("div",{className:"container my-5",children:[e.jsxs("div",{className:"row d-flex align-items-start",children:[e.jsx("div",{className:"col-12 col-lg-5 text-center",id:"product_image",children:e.jsx(H,{pause:"hover",children:s.images&&s.images.map(f=>e.jsx(H.Item,{children:e.jsx("img",{src:f.image,alt:s.name,className:"img-fluid",height:"500",width:"500"})},f._id))})}),e.jsxs("div",{className:"col-12 col-lg-5 mt-5",children:[e.jsx("h3",{children:s.name}),e.jsxs("p",{id:"product_id",children:["Product # ",s._id]}),e.jsx("hr",{}),e.jsx("div",{className:"rating-outer",children:e.jsx("div",{className:"rating-inner",style:{width:`${s.ratings/5*100}%`}})}),e.jsxs("span",{id:"no_of_reviews",children:["(",s.numOfReviews||0," Reviews)"]}),e.jsx("hr",{}),e.jsxs("p",{id:"product_price",children:["$",s.price||"N/A"]}),e.jsx("hr",{}),e.jsxs("div",{className:"stockCounter d-inline",children:[e.jsx("span",{className:"btn btn-danger minus",onClick:w,children:"-"}),e.jsx("input",{type:"number",className:"form-control count d-inline",value:d,readOnly:!0}),e.jsx("span",{className:"btn btn-primary plus",onClick:R,children:"+"})]}),e.jsx("button",{type:"button",id:"cart_btn",onClick:()=>l(Es(s._id,d)),disabled:s.stock==0,className:"btn btn-primary d-inline ml-4",children:"Add to Cart"}),e.jsx("hr",{}),e.jsxs("p",{children:["Status: ",e.jsx("span",{className:s.stock>0?"greenColor":"redColor",id:"stock_status",children:s.stock>0?"In-stock":"Out of Stock"})]}),e.jsx("hr",{}),e.jsx("h4",{className:"mt-2",children:"Description:"}),e.jsx("p",{children:s.description||"No description available."}),e.jsx("hr",{}),e.jsxs("p",{id:"product_seller",className:"mb-3",children:["Sold by: ",e.jsx("strong",{children:s.seller||"Unknown"})]}),n?e.jsx("button",{onClick:C,id:"review_btn",type:"button",class:"btn btn-primary mt-4","data-toggle":"modal","data-target":"#ratingModal",children:"Submit Your Review"}):e.jsx("div",{className:"alert alert-danger",children:"Login for Review "}),e.jsx("div",{className:"row mt-2 mb-5",children:e.jsx("div",{className:"rating w-50",children:e.jsxs($,{show:v,onHide:j,children:[e.jsx($.Header,{closeButton:!0,children:e.jsx($.Title,{children:"Submit Review"})}),e.jsxs($.Body,{children:[" ",e.jsx("ul",{class:"stars",children:[1,2,3,4,5].map(f=>e.jsx("li",{value:f,onClick:()=>u(f),className:`star ${f<=o?"orange":""}`,onMouseOver:I=>I.target.classList.add("yellow"),onMouseOut:I=>I.target.classList.remove("yellow"),children:e.jsx("i",{className:"fa fa-star"})}))}),e.jsx("textarea",{onChange:f=>h(f.target.value),name:"review",id:"review",className:"form-control mt-3"}),e.jsx("button",{disabled:t,onClick:p,className:"btn my-3 float-right review-btn px-4 text-white","data-dismiss":"modal","aria-label":"Close",children:"Submit"})]}),e.jsx($.Footer,{})]})})})]})]}),e.jsx(qs,{reviews:s.reviews})]})]})},Us=({title:s})=>{const{products:t,error:a,count:r,resPerPage:n}=x(p=>p.productsState),l=k(),[i,d]=m.useState(1),[c,o]=m.useState([1,1e3]),[u,g]=m.useState([1,1e3]),[h,v]=m.useState(null),[y,j]=m.useState(0),{keyword:C}=E(),R=["Electronics","Mobile Phones","Laptops","Accessories","Headphones","Food","Books","Clothes/Shoes","Beauty/Health","Sports","Outdoor","Home"],w=p=>{d(p)};return m.useEffect(()=>{a&&b.error(a),l(ee(C,c,h,y,i))},[l,C,u,h,y,i,a]),e.jsxs("div",{children:[e.jsx(O,{title:`${C}`}),e.jsx("h1",{id:"products_heading",children:"Search Products"}),e.jsx("section",{id:"products",className:"container mt-5",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6 col-md-3 mb-5 mt-5",children:[e.jsx("div",{className:"px-5",onMouseUp:()=>g(c),children:e.jsx(le,{range:!0,marks:{1:"$1",1e3:"$1000"},min:1,max:1e3,defaultValue:[1,1e3],onChange:p=>{o(p)},handleRender:p=>e.jsx(ie,{overlay:`$${p.props["aria-valuenow"]}`,children:e.jsx("div",{...p.props})})})}),e.jsx("hr",{className:"my-5"}),e.jsxs("div",{className:"mt-5",children:[e.jsx("h3",{children:"Category"}),e.jsx("ul",{className:"pl-0",children:R.map(p=>e.jsx("li",{style:{cursor:"pointer",listStyleType:"none"},onClick:()=>{v(p)},children:p},p))})]}),e.jsx("hr",{className:"my-5"}),e.jsxs("div",{className:"mt5",children:[e.jsx("h4",{className:"mb-3",children:"Ratings"}),e.jsx("ul",{className:"pl-0",children:[5,4,3,2,1].map(p=>e.jsx("li",{style:{cursor:"pointer",listStyleType:"none"},onClick:()=>{j(p)},children:e.jsx("div",{className:"rating-outer",children:e.jsx("div",{className:"rating-inner",style:{width:`${p*20}%`}})})},p))})]})]}),e.jsx("div",{className:"col-6 col-md-9 ",children:e.jsx("div",{className:"row",children:t&&t.map(p=>e.jsx("div",{className:"col-sm-12 col-md-6 col-lg-4 my-3",children:e.jsxs("div",{className:"card p-3 rounded",children:[e.jsx("img",{className:"card-img-top mx-auto",src:p.images[0].image,alt:p.name}),e.jsxs("div",{className:"card-body d-flex flex-column",children:[e.jsx("h5",{className:"card-title",children:e.jsx(N,{to:`/product/${p._id}`,children:p.name})}),e.jsxs("div",{className:"ratings mt-auto",children:[e.jsx("div",{className:"rating-outer",children:e.jsx("div",{className:"rating-inner",style:{width:`${p.ratings/5*100}%`}})}),e.jsx("span",{id:"no_of_reviews",children:p.numOfReviews})]}),e.jsxs("p",{className:"card-text",children:["$",p.price]}),e.jsx(N,{to:`/product/${p._id}`,id:"view_btn",className:"btn btn-block",children:"View Details"})]})]})},p._id))})})]})}),r>0&&r>n?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(X,{activePage:i,onChange:w,totalItemsCount:r,itemsCountPerPage:n,firstPageText:"FirstPage",lastPageText:"LastPage",itemClass:"page-item",linkClass:"page-link"})}):null]})},Ls=()=>{const[s,t]=m.useState(""),[a,r]=m.useState(""),n=k(),l=_(),i=Z(),{loading:d,error:c,isAuthenticated:o}=x(h=>h.authState),u=i.search?"/"+i.search.split("=")[1]:"/",g=h=>{h.preventDefault(),n(ls(s,a))};return m.useEffect(()=>{o&&l(u),c&&b.error(c,{onOpen:()=>{n(se())}})},[c,d,o]),e.jsxs(m.Fragment,{children:[e.jsx(O,{title:"login"}),e.jsx("div",{className:"row wrapper",children:e.jsx("div",{className:"col-10 col-lg-5",children:e.jsxs("form",{onSubmit:g,className:"shadow-lg",children:[e.jsx("h1",{className:"mb-3",children:"Login"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email_field",children:"Email"}),e.jsx("input",{type:"email",id:"email_field",className:"form-control",value:s,onChange:h=>t(h.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password_field",children:"Password"}),e.jsx("input",{type:"password",id:"password_field",className:"form-control",value:a,onChange:h=>r(h.target.value)})]}),e.jsx(N,{to:"/password/forgotPassword",className:"float-right mb-4",children:"Forgot Password?"}),e.jsx("button",{id:"login_button",type:"submit",className:"btn btn-block py-3",disabled:d,children:"LOGIN"}),e.jsx(N,{to:"/register",children:e.jsx("a",{className:"float-right mt-3",children:"New User?"})})]})})})]})},Hs=()=>{const s=k(),t=_(),{error:a,loading:r,isAuthenticated:n}=x(v=>v.authState),[l,i]=m.useState({name:"",email:"",password:""}),[d,c]=m.useState(""),[o,u]=m.useState("/images/images.png"),g=v=>{v.preventDefault();const y=new FormData;y.append("name",l.name),y.append("email",l.email),y.append("password",l.password),y.append("avatar",d),s(is(y))};m.useEffect(()=>{n&&t("/"),a&&b.error(a,{onOpen:()=>{s(se())}})},[a,r]);const h=v=>{if(v.target.name=="avatar"){const y=new FileReader;y.onload=()=>{y.readyState===2&&(u(y.result),c(v.target.files[0]))},y.readAsDataURL(v.target.files[0])}else i({...l,[v.target.name]:v.target.value})};return e.jsx("div",{children:e.jsx("div",{className:"row wrapper",children:e.jsx("div",{className:"col-10 col-lg-5",children:e.jsxs("form",{onSubmit:g,className:"shadow-lg",encType:"multipart/form-data",children:[e.jsx("h1",{className:"mb-3",children:"Register"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email_field",children:"Name"}),e.jsx("input",{type:"name",id:"name_field",className:"form-control",name:"name",onChange:h})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email_field",children:"Email"}),e.jsx("input",{type:"email",id:"email_field",className:"form-control",name:"email",onChange:h})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password_field",children:"Password"}),e.jsx("input",{type:"password",id:"password_field",className:"form-control",name:"password",onChange:h})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"avatar_upload",children:"Avatar"}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{children:e.jsx("figure",{className:"avatar mr-3 item-rtl",children:e.jsx("img",{src:o,className:"rounded-circle",alt:"image"})})}),e.jsxs("div",{className:"custom-file",children:[e.jsx("input",{type:"file",name:"avatar",className:"custom-file-input",id:"customFile",onChange:h}),e.jsx("label",{className:"custom-file-label",htmlFor:"customFile",children:"Choose Avatar"})]})]})]}),e.jsx("button",{id:"register_button",type:"submit",className:"btn btn-block py-3",disabled:r,children:"REGISTER"})]})})})})},Ms=D({name:"Order",initialState:{orderDetail:{},userOrders:[]},reducers:{createOrderRequest(s,t){return{...s,loading:!1}},createOrderSuccess(s,t){return{...s,loading:!1,orderDetail:t.payload.order}},createOrderFail(s,t){return{...s,loading:!1,error:t.payload}},userOrdersRequest(s,t){return{...s,loading:!1}},userOrdersSuccess(s=[],t){return{...s,loading:!1,userOrders:t.payload.myOrders}},userOrdersFail(s,t){return{...s,loading:!1,error:t.payload}},orderDetailRequest(s,t){return{...s,loading:!1}},orderDetailSuccess(s={},t){return{...s,loading:!1,orderDetail:t.payload.order}},orderDeatilFail(s,t){return{...s,loading:!1,error:t.payload}},clearOrderError(s,t){return{...s,error:null}}}}),{actions:zs,reducer:Js}=Ms,{createOrderRequest:Bs,createOrderSuccess:Vs,createOrderFail:U,clearOrderError:Qs,userOrdersRequest:Gs,userOrdersSuccess:Ks,userOrdersFail:Ys,orderDetailRequest:Ws,orderDetailSuccess:Xs,orderDeatilFail:W}=zs,Zs=oe({productsState:Ce,productState:js,authState:Te,cartState:_s,orderState:Js}),te=ce({reducer:Zs,middleware:s=>s().concat(de)}),et=()=>{const{user:s}=x(a=>a.authState),t=new Date(s.createDate).toLocaleDateString("en-GB");return e.jsx("div",{children:e.jsxs("div",{className:"row justify-content-around mt-5 user-info",children:[e.jsxs("div",{className:"col-12 col-md-3",children:[e.jsx("figure",{className:"avatar avatar-profile",children:e.jsx("img",{className:"rounded-circle img-fluid",src:s.avatar?` ${s.avatar}`:"./images.png",alt:"image"})}),e.jsx(N,{to:"/myprofile/update",href:"#",id:"edit_profile",className:"btn btn-primary btn-block my-5",children:"Edit Profile"})]}),e.jsxs("div",{className:"col-12 col-md-5",children:[e.jsx("h4",{children:"Full Name"}),e.jsx("p",{children:s.name}),e.jsx("h4",{children:"Email Address"}),e.jsx("p",{children:s.email}),e.jsx("h4",{children:"Joined"}),e.jsx("p",{children:t}),e.jsx(N,{to:"/order/myorders",className:"btn btn-danger btn-block mt-5",children:"My Orders"}),e.jsx(N,{to:"/password/changePassword",className:"btn btn-primary btn-block mt-3",children:"Change Password"})]})]})})};function F({children:s,isAdmin:t}){const{isAuthenticated:a,user:r}=x(n=>n.authState);return a?s:t===!0&&r.role!=="admin"?e.jsx(M,{to:"/"}):e.jsx(M,{to:"/login"})}const st=()=>{const{loading:s,user:t,error:a,isUpdated:r}=x(j=>j.authState),[n,l]=m.useState(""),[i,d]=m.useState(""),[c,o]=m.useState(""),[u,g]=m.useState("/images/images.png"),h=k();m.useEffect(()=>{if(t&&(l(t.name),d(t.email),t.avatar&&g(`http://127.0.0.1:8000${t.avatar}`)),r){b("User Updated Successfully",{type:"success",onOpen:()=>{h(We())}});return}if(a){b.error(a||"An error occurred",{});return}},[h,t,r,a]);const v=j=>{const C=new FileReader;C.onload=()=>{C.readyState===2&&(g(C.result),o(j.target.files[0]))},C.readAsDataURL(j.target.files[0])},y=j=>{j.preventDefault();const C=new FormData;C.append("name",n),C.append("email",i),C.append("avatar",c),localStorage.getItem("authToken")?h(ds(C)):b.error("Authentication token is missinddddddg")};return e.jsx("div",{children:e.jsx("div",{className:"row wrapper",children:e.jsx("div",{className:"col-10 col-lg-5",children:e.jsxs("form",{onSubmit:y,className:"shadow-lg",encType:"multipart/form-data",children:[e.jsx("h1",{className:"mt-2 mb-5",children:"Update Profile"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name_field",children:"Name"}),e.jsx("input",{type:"text",id:"name_field",className:"form-control",name:"name",value:n,onChange:j=>l(j.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email_field",children:"Email"}),e.jsx("input",{type:"email",id:"email_field",className:"form-control",name:"email",value:i,onChange:j=>d(j.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"avatar_upload",children:"Avatar"}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{children:e.jsx("figure",{className:"avatar mr-3 item-rtl",children:e.jsx("img",{src:u,className:"rounded-circle",alt:"Avatar Preview"})})}),e.jsxs("div",{className:"custom-file",children:[e.jsx("input",{type:"file",name:"avatar",className:"custom-file-input",id:"customFile",onChange:v}),e.jsx("label",{className:"custom-file-label",htmlFor:"customFile",children:"Choose Avatar"})]})]})]}),e.jsx("button",{type:"submit",className:"btn update-btn btn-block mt-4 mb-3",children:"Update"})]})})})})},tt=()=>{const{error:s,message:t}=x(o=>o.authState),[a,r]=m.useState(""),[n,l]=m.useState(""),i=k(),d=_();m.useEffect(()=>{console.log("isUpdated:",t,"error:",s),t&&b.success("Password updated successfully!",{type:"success"}),s&&b.error(s)},[isUpdated,s,d]);const c=o=>{o.preventDefault();const u=new FormData;u.append("oldPassword",a),u.append("password",n),localStorage.getItem("authToken")?i(ms(u)):b.error("Authentication token is missing")};return e.jsx("div",{children:e.jsx("div",{className:"row wrapper",children:e.jsx("div",{className:"col-10 col-lg-5",children:e.jsxs("form",{onSubmit:c,className:"shadow-lg",children:[e.jsx("h1",{className:"mt-2 mb-5",children:"Update Password"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"old_password_field",children:"Old Password"}),e.jsx("input",{type:"password",id:"old_password_field",className:"form-control",value:a,onChange:o=>r(o.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"new_password_field",children:"New Password"}),e.jsx("input",{type:"password",id:"new_password_field",className:"form-control",value:n,onChange:o=>l(o.target.value)})]}),e.jsx("button",{type:"submit",className:"btn update-btn btn-block mt-4 mb-3",children:"Update Password"})]})})})})},at=()=>{const[s,t]=m.useState(""),{loading:a,error:r,message:n}=x(d=>d.authState),l=k(),i=d=>{d.preventDefault();const c=new FormData;c.append("email",s),l(hs(c))};return m.useEffect(()=>{n&&(b.success(n),t("")),r&&b.error(r)},[n,r,l]),e.jsx("div",{children:e.jsx("div",{className:"row wrapper",children:e.jsx("div",{className:"col-10 col-lg-5",children:e.jsxs("form",{onSubmit:i,className:"shadow-lg",children:[e.jsx("h1",{className:"mb-3",children:"Forgot Password"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email_field",children:"Enter Email"}),e.jsx("input",{type:"email",id:"email_field",className:"form-control",value:s,onChange:d=>t(d.target.value)})]}),e.jsx("button",{id:"forgot_password_button",type:"submit",className:"btn btn-block py-3",children:"Send Email"})]})})})})},rt=()=>{const{isAuthenticated:s,error:t}=x(u=>u.authState),[a,r]=m.useState(""),[n,l]=m.useState(""),i=k(),{token:d}=E(),c=_(),o=u=>{u.preventDefault();const g=new FormData;g.append("password",a),g.append("confirmPassword",n),i(us(g,d))};return m.useEffect(()=>{s&&(c("/login"),b.success("Reset Password Successfully")),t&&b.error(t)},[s,t,i]),e.jsx("div",{children:e.jsx("div",{className:"row wrapper",children:e.jsx("div",{className:"col-10 col-lg-5",children:e.jsxs("form",{onSubmit:o,className:"shadow-lg",children:[e.jsx("h1",{className:"mb-3",children:"New Password"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password_field",children:"Password"}),e.jsx("input",{type:"password",id:"password_field",className:"form-control",value:a,onChange:u=>r(u.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirm_password_field",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirm_password_field",className:"form-control",value:n,onChange:u=>l(u.target.value)})]}),e.jsx("button",{id:"new_password_button",type:"submit",className:"btn btn-block py-3",children:"Set Password"})]})})})})},nt=()=>{const s=k();x(c=>c.authState);const{items:t}=x(c=>c.cartState),a=_(),r=(c,o)=>{t.find(g=>g.product===c).quantity>=o||s(Is(c))},n=c=>{t.find(u=>u.product===c).quantity<=1||s(As(c))},l=()=>t.reduce((c,o)=>c+o.price*o.quantity,0).toLocaleString(void 0,{minimumFractionDigits:2}),i=()=>t.reduce((c,o)=>c+o.quantity,0),d=()=>{a("/login?redirect=shipping")};return e.jsx("div",{children:t.length===0?e.jsx("h2",{className:"text-danger",children:"Your Cart is Empty"}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"mt-5",children:["Your Cart: ",e.jsxs("b",{children:[t.length," item(s)"]})]}),e.jsxs("div",{className:"row d-flex justify-content-between",children:[e.jsx("div",{className:"col-12 col-lg-8",children:t.map(c=>e.jsxs("div",{children:[e.jsx("hr",{}),e.jsx("div",{className:"cart-item",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4 col-lg-3",children:e.jsx("img",{src:c.image,alt:c.name,height:"90",width:"115"})}),e.jsx("div",{className:"col-5 col-lg-3",children:e.jsx(N,{to:`/product/${c.product}`,children:c.name})}),e.jsx("div",{className:"col-4 col-lg-2 mt-4 mt-lg-0 text-warning ",children:e.jsxs("p",{id:"cart_item_price",style:{fontSize:"25px"},children:["$",c.price]})}),e.jsx("div",{className:"col-4 col-lg-3 mt-4 mt-lg-0",children:e.jsxs("div",{className:"stockCounter d-inline",children:[e.jsx("button",{onClick:()=>n(c.product),className:"btn btn-danger minus",disabled:c.quantity<=1,children:"-"}),e.jsx("input",{type:"number",className:"form-control count d-inline",value:c.quantity,readOnly:!0}),e.jsx("button",{onClick:()=>r(c.product,c.stock),className:"btn btn-primary plus",disabled:c.quantity>=c.stock,children:"+"})]})}),e.jsx("div",{className:"col-4 col-lg-1 mt-4 mt-lg-0",children:e.jsx("i",{id:"delete_cart_item",onClick:()=>s(Rs(c.product)),className:"fa fa-trash btn btn-danger"})})]})})]},c.product))}),e.jsx("div",{className:"col-12 col-lg-3 my-4",children:e.jsxs("div",{id:"order_summary",children:[e.jsx("h4",{children:"Order Summary"}),e.jsx("hr",{}),e.jsxs("p",{children:["Subtotal:"," ",e.jsxs("span",{className:"order-summary-values",children:[i()," (Units)"]})]}),e.jsxs("p",{children:["Est. total:"," ",e.jsxs("span",{className:"order-summary-values",children:["$",l()]})]}),e.jsx("hr",{}),e.jsx("p",{id:"checkout_btn",className:"btn btn-primary btn-block",onClick:d,children:"Check out"})]})})]})]})})},L=({shipping:s,confirmOrder:t,payment:a})=>e.jsxs("div",{className:"checkout-progress d-flex justify-content-center mt-5",children:[s?e.jsxs(N,{to:"/shipping",children:[e.jsx("div",{className:"triangle2-active"}),e.jsx("div",{className:"step active-step",children:"Shipping Info"}),e.jsx("div",{className:"triangle-active"})]}):e.jsxs(N,{to:"/shipping",children:[e.jsx("div",{className:"triangle2-incomplete"}),e.jsx("div",{className:"step incomplete",children:"Shipping Info"}),e.jsx("div",{className:"triangle-incomplete"})]}),t?e.jsxs(N,{to:"/order/confirm",children:[e.jsx("div",{className:"triangle2-active"}),e.jsx("div",{className:"step active-step",children:"Confirm Order"}),e.jsx("div",{className:"triangle-active"})]}):e.jsxs(N,{to:"/shipping",children:[e.jsx("div",{className:"triangle2-incomplete"}),e.jsx("div",{className:"step incomplete",children:"Confirm Order"}),e.jsx("div",{className:"triangle-incomplete"})]}),a?e.jsxs(N,{to:"/payment",children:[e.jsx("div",{className:"triangle2-active"}),e.jsx("div",{className:"step active-step",children:"Payment"}),e.jsx("div",{className:"triangle-active"})]}):e.jsxs(N,{to:"/shipping",children:[e.jsx("div",{className:"triangle2-incomplete"}),e.jsx("div",{className:"step incomplete",children:"Payment"}),e.jsx("div",{className:"triangle-incomplete"})]})]}),ae=(s,t)=>{(!s.address||!s.city||!s.phoneNo||!s.postalCode||!s.state||!s.country)&&(b.error("Please Fill the Shipping Details"),t("/shipping"))},lt=({isAuthenticated:s})=>{const{shippingInfo:t}=x(w=>w.cartState),a=_(),[r,n]=m.useState((t==null?void 0:t.address)??""),[l,i]=m.useState((t==null?void 0:t.city)??""),[d,c]=m.useState((t==null?void 0:t.phoneNo)??""),[o,u]=m.useState((t==null?void 0:t.postalCode)??""),[g,h]=m.useState((t==null?void 0:t.country)??""),[v,y]=m.useState((t==null?void 0:t.state)??""),j=Object.values(me),C=k(),R=w=>{w.preventDefault(),C($s({address:r,city:l,phoneNo:d,postalCode:o,country:g,state:v})),a("/order/confirm")};return e.jsxs("div",{children:[e.jsx(O,{title:"shipping"}),e.jsx(L,{shipping:!0}),e.jsx("div",{className:"row wrapper",children:e.jsx("div",{className:"col-10 col-lg-5",children:e.jsxs("form",{onSubmit:R,className:"shadow-lg",children:[e.jsx("h1",{className:"mb-4",children:"Shipping Info"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"address_field",children:"Address"}),e.jsx("input",{type:"text",id:"address_field",className:"form-control",value:r,onChange:w=>n(w.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"city_field",children:"City"}),e.jsx("input",{type:"text",id:"city_field",className:"form-control",value:l,onChange:w=>i(w.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone_field",children:"Phone No"}),e.jsx("input",{type:"phone",id:"phone_field",className:"form-control",value:d,onChange:w=>c(w.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"postalCode_field",children:"Postal Code"}),e.jsx("input",{type:"number",id:"postalCode_field",className:"form-control",value:o,onChange:w=>u(w.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"state_field",children:"State"}),e.jsx("input",{type:"text",id:"state_field",className:"form-control",value:v,onChange:w=>y(w.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"country_field",children:"Country"}),e.jsxs("select",{id:"country_field",className:"form-control",value:g,onChange:w=>h(w.target.value),required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select a country"}),j.map((w,p)=>e.jsx("option",{value:w.name,children:w.name},p))]})]}),e.jsx("button",{id:"shipping_btn",type:"submit",className:"btn btn-block py-3",children:"CONTINUE"})]})})})]})},it=()=>{const{shippingInfo:s,items:t}=x(o=>o.cartState),{user:a}=x(o=>o.authState),r=parseFloat(t.reduce((o,u)=>o+(u.price||0)*(u.quantity||0),0).toFixed(2)),n=r>300?0:20;let l=parseFloat((.18*r).toFixed(2));const i=parseFloat((r+n+l).toFixed(2)),d=()=>{const o={itemPrice:r,shippingPrice:n,taxPrice:l,totalPrice:i};sessionStorage.setItem("orderInfo",JSON.stringify(o)),c("/payment")},c=_();return m.useEffect(()=>{ae(s,c)},[]),e.jsxs("div",{children:[e.jsx(O,{title:"ConfirmOrder"}),e.jsx(L,{shipping:!0,confirmOrder:!0}),e.jsxs("div",{className:"row d-flex justify-content-between",children:[e.jsxs("div",{className:"col-12 col-lg-8 mt-5 order-confirm",children:[e.jsx("h4",{className:"mb-3",children:"Shipping Info"}),e.jsxs("p",{children:[e.jsx("b",{children:"Name:"})," ",a.name]}),e.jsxs("p",{children:[e.jsx("b",{children:"Phone:"})," ",s.phoneNo]}),e.jsxs("p",{className:"mb-4",children:[e.jsx("b",{children:"Address:"})," ",s.address,",",s.city,",",s.postalCode,",",s.state,",",s.country]}),e.jsx("hr",{}),e.jsx("h4",{className:"mt-4",children:"Your Cart Items:"}),t.map(o=>e.jsxs("div",{children:[e.jsx("hr",{}),e.jsx("div",{className:"cart-item my-1",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4 col-lg-2",children:e.jsx("img",{src:o.image,alt:o.name,height:"45",width:"65"})}),e.jsx("div",{className:"col-5 col-lg-6",children:e.jsx("a",{href:"#",children:o.name})}),e.jsx("div",{className:"col-4 col-lg-4 mt-4 mt-lg-0",children:e.jsxs("p",{children:[o.quantity," x $",o.price," = ",e.jsxs("b",{children:["$",o.quantity*o.price]})]})})]})})]},o.id)),e.jsx("hr",{})]}),e.jsx("div",{className:"col-12 col-lg-3 my-4",children:e.jsxs("div",{id:"order_summary",children:[e.jsx("h4",{children:"Order Summary"}),e.jsx("hr",{}),e.jsxs("p",{children:["itemPrice:  ",e.jsxs("span",{className:"order-summary-values",children:["$",r]})]}),e.jsxs("p",{children:["Shipping: ",e.jsxs("span",{className:"order-summary-values",children:["$",n]})]}),e.jsxs("p",{children:["Tax:  ",e.jsxs("span",{className:"order-summary-values",children:["$",l]})]}),e.jsx("hr",{}),e.jsxs("p",{children:["Total: ",e.jsxs("span",{className:"order-summary-values",children:["$",i]})]}),e.jsx("hr",{}),e.jsx("button",{id:"checkout_btn",onClick:d,className:"btn btn-primary btn-block",children:"Proceed to Payment"})]})})]})]})},ot=s=>async t=>{var n,l;const a=localStorage.getItem("authToken");if(!a)return t(U("Authentication token is missing."));const r={headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},withCredentials:!0};try{t(Bs());const{data:i}=await P.post("http://localhost:8000/api/order/new",s,r);t(Vs(i))}catch(i){const d=((l=(n=i.response)==null?void 0:n.data)==null?void 0:l.message)||"An error occurred";t(U(d))}},ct=s=>async t=>{const a=localStorage.getItem("authToken");if(!a)return t(W("Authentication token is missing."));const r={headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},withCredentials:!0};try{t(Ws());const{data:n}=await P.get(`http://localhost:8000/api/order/getorder/${s}`,r);t(Xs(n))}catch(n){t(W(n.response.data.message))}},dt=async s=>{const t=localStorage.getItem("authToken");if(!t)return s(U("Authentication token is missing."));const a={headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},withCredentials:!0};try{s(Gs());const{data:r}=await P.get("http://localhost:8000/api/order/myorder",a);s(Ks(r))}catch(r){s(Ys(r.response.data.message))}},mt=()=>{const s=ue(),t=he(),a=_(),r=k(),n=JSON.parse(sessionStorage.getItem("orderInfo")),{user:l}=x(h=>h.authState),{items:i,shippingInfo:d}=x(h=>h.cartState),{error:c}=x(h=>h.orderState),o={amount:Math.round(n.totalPrice*100),currency:"usd",shipping:{name:l.name,address:{city:d.city,postal_code:d.postalCode,state:d.state,line1:d.address,country:d.country},phone:d==null?void 0:d.phoneNo}},u={orderItems:i,shippingInfo:d};n&&(u.itemPrice=n.itemPrice,u.shippingPrice=n.shippingPrice,u.taxPrice=n.taxPrice,u.totalPrice=n.totalPrice),m.useEffect(()=>{ae(d,a),c&&b(c,{type:"error",onOpen:()=>{r(Qs())}})},[]);const g=async h=>{h.preventDefault(),document.querySelector("#pay_btn").disabled=!0;try{const{data:v}=await P.post("http://localhost:8000/api/stripe/process",o),y=v.client_secret,j=await s.confirmCardPayment(y,{payment_method:{card:t.getElement(z),billing_details:{name:l.name,email:l.email}}});j.error?(b(j.error.message,{type:"error"}),document.querySelector("#pay_btn").disabled=!1):j.paymentIntent.status==="succeeded"?(b("Payment Complete",{type:"success"}),u.paymentInfo={id:j.paymentIntent.id,status:j.paymentIntent.status},r(Ds()),r(ot(u)),a("/order/success")):b("Please try again",{type:"warning"})}catch(v){b("Something went wrong, please try again",{type:"error"}),console.error(v)}finally{document.querySelector("#pay_btn").disabled=!1}};return e.jsxs("div",{children:[e.jsx(O,{title:"Payment"}),e.jsx(L,{shipping:!0,confirmOrder:!0,payment:!0}),e.jsx("div",{className:"row wrapper",children:e.jsx("div",{className:"col-10 col-lg-5",children:e.jsxs("form",{onSubmit:g,className:"shadow-lg",children:[e.jsx("h1",{className:"mb-4",children:"Card Info"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"card_num_field",children:"Card Number"}),e.jsx(z,{id:"card_num_field",className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"card_exp_field",children:"Card Expiry"}),e.jsx(pe,{id:"card_exp_field",className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"card_cvc_field",children:"Card CVC"}),e.jsx(xe,{id:"card_cvc_field",className:"form-control"})]}),e.jsxs("button",{id:"pay_btn",type:"submit",className:"btn btn-block py-3",children:["Pay - ",` $${(n==null?void 0:n.totalPrice)||0}`]})]})})})]})},ut=()=>e.jsx("div",{children:e.jsx("div",{className:"row justify-content-center",children:e.jsxs("div",{className:"col-6 mt-5 text-center",children:[e.jsx("img",{className:"my-5 img-fluid d-block mx-auto",src:"/images/success.png",alt:"Order Success",width:"200",height:"200"}),e.jsx("h2",{children:"Your Order has been placed successfully."}),e.jsx("a",{href:"/order/myorders",children:"Go to Orders"})]})})}),ht=()=>{const{userOrders:s=[]}=x(r=>r.orderState);console.log(s);const t=k();m.useEffect(()=>{t(dt)},[t]);const a=()=>{const r={columns:[{label:"Order ID",field:"id",sort:"asc"},{label:"No of Items",field:"noofitems",sort:"asc"},{label:"Amount",field:"amount",sort:"asc"},{label:"Status",field:"status",sort:"asc"},{label:"Actions",field:"actions",sort:"asc"}],rows:[]};return s.forEach(n=>{r.rows.push({id:n._id,noofitems:n.orderItems.length,amount:`$${n.totalPrice}`,status:e.jsx("p",{style:{color:n.orderStatus==="delivered"?"green":"red"},children:n.orderStatus}),actions:e.jsx(N,{to:`/order/${n._id}`,className:"btn btn-primary",children:e.jsx("i",{className:"fa fa-eye"})})})}),r};return e.jsxs("div",{children:[e.jsx(O,{title:"My Orders"}),e.jsx("h1",{className:"mt-5",children:"My Orders"}),e.jsx(ge,{className:"px-3",bordered:!0,striped:!0,hover:!0,data:a()})]})},pt=()=>{const{orderDetail:s}=x(u=>u.orderState),{user:t={},shippingInfo:a={},paymentInfo:r={},orderItems:n=[],totalPrice:l=0,orderStatus:i="Processing"}=s,d=k(),{id:c}=E(),o=!!(r&&r.status==="succeeded");return m.useEffect(()=>{c&&d(ct(c))},[c,d]),e.jsx("div",{children:s?e.jsx("div",{className:"row d-flex justify-content-between",children:e.jsxs("div",{className:"col-12 col-lg-8 mt-5 order-details",children:[e.jsxs("h1",{className:"my-5",children:["Order ",s._id||"N/A"]}),e.jsx("h4",{className:"mb-4",children:"Shipping Info"}),e.jsxs("p",{children:[e.jsx("b",{children:"Name:"})," ",t.name||"N/A"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Phone:"})," ",a.phoneNo||"N/A"]}),e.jsxs("p",{className:"mb-4",children:[e.jsx("b",{children:"Address:"})," ",`${a.address||""}, ${a.city||""}, ${a.state||""}, ${a.country||""}`]}),e.jsxs("p",{children:[e.jsx("b",{children:"Amount:"})," $",l]}),e.jsx("hr",{}),e.jsx("h4",{className:"my-4",children:"Payment"}),e.jsx("p",{className:o?"greenColor":"redColor",children:e.jsx("b",{children:o?"PAID":"NOT PAID"})}),e.jsx("h4",{className:"my-4",children:"Order Status:"}),e.jsx("p",{className:i&&i.includes("delivered")?"greenColor":"redColor",children:e.jsx("b",{children:i})}),e.jsx("h4",{className:"my-4",children:"Order Items:"}),e.jsx("hr",{}),e.jsx("div",{className:"cart-item my-1",children:n.map((u,g)=>e.jsxs("div",{className:"row my-5",children:[e.jsx("div",{className:"col-4 col-lg-2",children:e.jsx("img",{src:u.image,alt:u.name,height:"45",width:"65"})}),e.jsx("div",{className:"col-5 col-lg-5",children:e.jsx("a",{href:"#",children:u.name})}),e.jsx("div",{className:"col-4 col-lg-2 mt-4 mt-lg-0",children:e.jsxs("p",{children:["$",u.price]})}),e.jsx("div",{className:"col-4 col-lg-3 mt-4 mt-lg-0",children:e.jsxs("p",{children:[u.quantity||0," item(s)"]})})]},g))}),e.jsx("hr",{})]})}):e.jsx("h5",{children:"No Data"})})},xt=()=>{const s=_();return e.jsx("div",{children:e.jsx("div",{className:"sidebar-wrapper",children:e.jsx("nav",{id:"sidebar",children:e.jsxs("ul",{className:"list-unstyled components",children:[e.jsx("li",{children:e.jsxs(N,{to:"/admin/dashboard",children:[e.jsx("i",{className:"fas fa-tachometer-alt"})," Dashboard"]})}),e.jsx("li",{children:e.jsxs(q,{title:e.jsx("i",{className:"fa fa-product-hunt",children:"Products"}),children:[e.jsx(q.Item,{onClick:()=>s("/admin/products"),children:e.jsx("i",{className:"fa fa-shopping-basket",children:"All"})}),e.jsx(q.Item,{onClick:()=>s("/admin/products/create"),children:e.jsx("i",{className:"fa fa-plus",children:"Create"})})]})}),e.jsx("li",{children:e.jsxs(N,{to:"/admin/orders",children:[e.jsx("i",{className:"fa fa-shopping-basket"})," Orders"]})}),e.jsx("li",{children:e.jsxs(N,{to:"/admin/users",children:[e.jsx("i",{className:"fa fa-users"})," Users"]})})]})})})})},gt=()=>{const{products:s=[]}=x(r=>r.productsState),t=k();let a=0;return s.length>0&&s.forEach(r=>{r.stock===0&&(a=a+1)}),m.useEffect(()=>{t(Ae)},[]),e.jsx("div",{children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-2",children:e.jsx(xt,{})}),e.jsxs("div",{className:"col-12 col-md-10",children:[e.jsx("h1",{className:"my-4",children:"Dashboard"}),e.jsx("div",{className:"row pr-4",children:e.jsx("div",{className:"col-xl-12 col-sm-12 mb-3",children:e.jsx("div",{className:"card text-white bg-primary o-hidden h-100",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"text-center card-font-size",children:["Total Amount",e.jsx("br",{})," ",e.jsx("b",{children:"$3425"})]})})})})}),e.jsxs("div",{className:"row pr-4",children:[e.jsx("div",{className:"col-xl-3 col-sm-6 mb-3",children:e.jsxs("div",{className:"card text-white bg-success o-hidden h-100",children:[e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"text-center card-font-size",children:["Products",e.jsx("br",{})," ",e.jsx("b",{children:s.length})]})}),e.jsxs("a",{className:"card-footer text-white clearfix small z-1",to:"/admin/products",children:[e.jsx("span",{className:"float-left",children:"View Details"}),e.jsx("span",{className:"float-right",children:e.jsx("i",{className:"fa fa-angle-right"})})]})]})}),e.jsx("div",{className:"col-xl-3 col-sm-6 mb-3",children:e.jsxs("div",{className:"card text-white bg-danger o-hidden h-100",children:[e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"text-center card-font-size",children:["Orders",e.jsx("br",{})," ",e.jsx("b",{children:"345"})]})}),e.jsxs("a",{className:"card-footer text-white clearfix small z-1",to:"/admin/orders",children:[e.jsx("span",{className:"float-left",children:"View Details"}),e.jsx("span",{className:"float-right",children:e.jsx("i",{className:"fa fa-angle-right"})})]})]})}),e.jsx("div",{className:"col-xl-3 col-sm-6 mb-3",children:e.jsxs("div",{className:"card text-white bg-info o-hidden h-100",children:[e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"text-center card-font-size",children:["Users",e.jsx("br",{})," ",e.jsx("b",{children:"55"})]})}),e.jsxs("a",{className:"card-footer text-white clearfix small z-1",href:"/admin/users",children:[e.jsx("span",{className:"float-left",children:"View Details"}),e.jsx("span",{className:"float-right",children:e.jsx("i",{className:"fa fa-angle-right"})})]})]})}),e.jsx("div",{className:"col-xl-3 col-sm-6 mb-3",children:e.jsx("div",{className:"card text-white bg-warning o-hidden h-100",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"text-center card-font-size",children:["Out of Stock",e.jsx("br",{})," ",e.jsx("b",{children:a})]})})})})]})]})]})})};function jt(){const[s,t]=m.useState("");return m.useEffect(()=>{te.dispatch(os);async function a(){const{data:r}=await P.get("http://localhost:8000/api/stripe/apiKey");t(r.stripeApikey)}a()},[]),s?e.jsx(je,{children:e.jsx(e.Fragment,{children:e.jsxs(fe,{children:[e.jsx(ps,{}),e.jsx("div",{className:"container container-fluid",children:e.jsxs(J,{children:[e.jsx(S,{path:"/",element:e.jsx(Re,{})}),e.jsx(S,{path:"/login",element:e.jsx(Ls,{})}),e.jsx(S,{path:"/register",element:e.jsx(Hs,{})}),e.jsx(S,{path:"/search/:keyword",element:e.jsx(Us,{})}),e.jsx(S,{path:"/product/:id",element:e.jsx(Ts,{})}),e.jsx(S,{path:"/myprofile",element:e.jsx(F,{children:e.jsx(et,{})})}),e.jsx(S,{path:"/myprofile/update",element:e.jsx(F,{children:e.jsx(st,{})})}),e.jsx(S,{path:"/password/changePassword",element:e.jsx(F,{children:e.jsx(tt,{})})}),e.jsx(S,{path:"/password/forgotPassword",element:e.jsx(at,{})}),e.jsx(S,{path:"/password/reset/:token",element:e.jsx(rt,{})}),e.jsx(S,{path:"/cart",element:e.jsx(nt,{})}),e.jsx(S,{path:"/shipping",element:e.jsx(F,{children:e.jsx(lt,{})})}),e.jsx(S,{path:"/order/confirm",element:e.jsx(F,{children:e.jsx(it,{})})}),s&&e.jsx(S,{path:"/payment",element:e.jsx(F,{children:e.jsx(Ne,{stripe:ve(s),children:e.jsx(mt,{})})})}),e.jsx(S,{path:"/order/success",element:e.jsx(F,{children:e.jsx(ut,{})})}),e.jsx(S,{path:"/order/myorders",element:e.jsx(F,{children:e.jsx(ht,{})})}),e.jsx(S,{path:"/order/:id",element:e.jsx(F,{children:e.jsx(pt,{})})})]})}),e.jsx(J,{children:e.jsx(S,{path:"/admin/dashboard",element:e.jsx(F,{isAdmin:!0,children:e.jsx(gt,{})})})}),e.jsx(ye,{}),e.jsx($e,{})]})})}):e.jsx("div",{children:"Loading..."})}we.createRoot(document.getElementById("root")).render(e.jsx(be,{store:te,children:e.jsx(jt,{})}));
